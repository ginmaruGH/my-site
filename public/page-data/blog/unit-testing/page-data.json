{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/unit-testing/","result":{"data":{"markdownRemark":{"id":"5c0c5fdc-d491-54c1-88af-1ad18fa3a6e2","html":"<p><a href=\"https://www.gatsbyjs.com/docs/how-to/testing/unit-testing/\">https://www.gatsbyjs.com/docs/how-to/testing/unit-testing/</a></p>\n<p>Unit testing is a great way to protect against errors in your code before you deploy it. While Gatsby does not include support for unit testing out of the box, it only takes a few steps to get up and running. However, there are a few features of the Gatsby build process that mean the standard Jest setup doesn’t quite work. This guide shows you how to set it up.</p>\n<h2 id=\"setting-up-your-environment-br-（環境のセットアップ）\" style=\"position:relative;\"><a href=\"#setting-up-your-environment-br-%EF%BC%88%E7%92%B0%E5%A2%83%E3%81%AE%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97%EF%BC%89\" aria-label=\"setting up your environment br （環境のセットアップ） permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up your environment <br />（環境のセットアップ）</h2>\n<p>The most popular testing framework for React is <a href=\"https://jestjs.io/\">Jest</a>, which was created by Facebook. While Jest is a general-purpose JavaScript unit testing framework, it has lots of features that make it work particularly well with React.</p>\n<blockquote>\n<p>Note: For this guide, you will be starting with <code class=\"language-text\">gatsby-starter-default</code>, but the concepts should be the same or very similar for your site.</p>\n</blockquote>\n  <details open><summary>Google翻訳</summary><div>\n<p>  Reactのもっとも人気のあるテストフレームワークは、Facebookによって作成された<a href=\"https://jestjs.io/\">Jest</a>です。\nJestは汎用のJavaScriptユニットテストフレームワークですが、Reactでとくにうまく機能する多くの機能があります。</p>\n<blockquote>\n<p>注：このガイドでは、gatsby-starter-defaultから始めますが、概念は同じか非常に似ているサイトである必要があります。\n</dvi></details></p>\n</blockquote>\n<h3 id=\"1-installing-dependencies-br-（依存関係のインストール）\" style=\"position:relative;\"><a href=\"#1-installing-dependencies-br-%EF%BC%88%E4%BE%9D%E5%AD%98%E9%96%A2%E4%BF%82%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%EF%BC%89\" aria-label=\"1 installing dependencies br （依存関係のインストール） permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Installing dependencies <br />（依存関係のインストール）</h3>\n<p>First, you need to install <code class=\"language-text\">Jest</code> and some more required packages. Install <code class=\"language-text\">babel-jes</code>t and <code class=\"language-text\">babel-preset-gatsby</code> to ensure that the babel preset(s) that are used match what are used internally for your Gatsby site.</p>\n  <details open><summary>Google翻訳</summary><div>\n<p>  まず、 <code class=\"language-text\">Jest</code>とその他の必要なパッケージをインストールする必要があります。<code class=\"language-text\">babel-jest</code>と<code class=\"language-text\">babel-preset-gatsby</code>をインストールして、使用されるbabelプリセットがGatsbyサイトで内部的に使用されているものと一致することを確認します。\n</dvi></details></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"command-line-prompt\"><span data-user=root data-host=localhost></span></span><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev jest babel-jest react-test-renderer babel-preset-gatsby identity-obj-proxy</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3 id=\"2-creating-a-configuration-file-for-jest-br-（jestの構成ファイルの作成）\" style=\"position:relative;\"><a href=\"#2-creating-a-configuration-file-for-jest-br-%EF%BC%88jest%E3%81%AE%E6%A7%8B%E6%88%90%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E4%BD%9C%E6%88%90%EF%BC%89\" aria-label=\"2 creating a configuration file for jest br （jestの構成ファイルの作成） permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Creating a configuration file for Jest <br />（Jestの構成ファイルの作成）</h3>\n<p>Because Gatsby handles its own Babel configuration, you will need to manually tell Jest to use <code class=\"language-text\">babel-jest</code>. The easiest way to do this is to add a <code class=\"language-text\">jest.config.js</code>. You can set up some useful defaults at the same time:</p>\n  <details open><summary>Google翻訳</summary><div>\n<p>  Gatsbyは独自のBabel構成を処理するため、手動でJestに <code class=\"language-text\">babel-jest</code>を使用するように指示する必要があります。\nこれを行うもっとも簡単な方法は、 <code class=\"language-text\">jest.config.js</code>を追加することです。いくつかの便利なデフォルトを同時に設定できます。\n</dvi></details></p>\n<div class=\"filename\">jest.config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  transform<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"^.+\\\\.jsx?$\"</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;rootDir>/jest-preprocess.js</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  moduleNameMapper<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\".+\\\\.(css|styl|less|sass|scss)$\"</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">identity-obj-proxy</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\".+\\\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$\"</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;rootDir>/__mocks__/file-mock.js</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  testPathIgnorePatterns<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">node_modules</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\\\\.cache</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;rootDir>.*/public</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  transformIgnorePatterns<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">node_modules/(?!(gatsby)/)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  globals<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    __PATH_PREFIX__<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  testURL<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://localhost</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  setupFiles<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;rootDir>/loadershim.js</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Go over the content of this configuration file:</p>\n<ul>\n<li>\n<p>The <code class=\"language-text\">transform</code> section tells Jest that all <code class=\"language-text\">js</code> or <code class=\"language-text\">jsx</code> files need to be transformed using a <code class=\"language-text\">jest-preprocess.js</code> file in the project root. Go ahead and create this file now. This is where you set up your Babel config. You can start with the following minimal config:</p>\n<details open><summary>Google翻訳</summary><div>\n<p>この構成ファイルの内容を確認します。</p>\n<ul>\n<li><code class=\"language-text\">transform</code>セクションは、プロジェクトルートの<code class=\"language-text\">jest-preprocess.js</code>ファイルを使用してすべての <code class=\"language-text\">js</code>または<code class=\"language-text\">jsx</code>ファイルを変換する必要があることをJestに通知します。さあ、このファイルを今すぐ作成してください。\nここで、Babel構成を設定します。次の最小限の構成から始めることができます。\n</dvi></details></li>\n</ul>\n</li>\n</ul>\n<div class=\"filename\">jest-preprocess.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> babelOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  presets<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"babel-preset-gatsby\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"babel-jest\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">createTransformer</span><span class=\"token punctuation\">(</span>babelOptions<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p>The next option is <code class=\"language-text\">moduleNameMapper</code>. This section works a bit like webpack rules and tells Jest how to handle imports. You are mainly concerned here with mocking static file imports, which Jest can’t handle. A mock is a dummy module that is used instead of the real module inside tests. It is good when you have something that you can’t or don’t want to test. You can mock anything, and here you are mocking assets rather than code. For stylesheets you need to use the package <code class=\"language-text\">identity-obj-proxy</code>. For all other assets, you need to use a manual mock called <code class=\"language-text\">file-mock.js</code>. You need to create this yourself. The convention is to create a directory called <code class=\"language-text\">__mocks__</code> in the root directory for this. Note the pair of double underscores in the name.</p>\n<details open><summary>Google翻訳</summary><div>\n<ul>\n<li>次のオプションは <code class=\"language-text\">moduleNameMapper</code>です。 このセクションはwebpackルールのように機能し、Jestにインポートの処理方法を説明します。\nここでは主に静的ファイルのインポートのモックに関心がありますが、<code class=\"language-text\">Jest</code>は処理できません。\nモックは、テスト内で実際のモジュールの代わりに使用されるダミーモジュールです。 テストできない、またはテストしたくないものがある場合に適しています。\n何でもモックできます。ここでは、コードではなくアセットをモックしています。\nスタイルシートの場合は、パッケージ <code class=\"language-text\">identity-obj-proxy</code>を使用する必要があります。\nほかのすべてのアセットについては、 <code class=\"language-text\">file-mock.js</code>と呼ばれる手動モックを使用する必要があります。\nこれは自分で作成する必要があります。慣例では、このためのルートディレクトリに <code class=\"language-text\">__mocks__</code>というディレクトリを作成します。名前の二重下線のペアに注意してください。\n</dvi></details></li>\n</ul>\n</li>\n</ul>\n<div class=\"filename\">__mocks__/file-mock.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token string\">\"test-file-stub\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>The next config setting is <code class=\"language-text\">testPathIgnorePatterns</code>. You are telling Jest to ignore any tests in the <code class=\"language-text\">node_modules</code> or <code class=\"language-text\">.cache</code> directories.</li>\n<li>\n<p>The next option is very important and is different from what you’ll find in other Jest guides. The reason that you need <code class=\"language-text\">transformIgnorePatterns</code> is because Gatsby includes un-transpiled ES6 code. By default Jest doesn’t try to transform code inside <code class=\"language-text\">node_modules</code>, so you will get an error like this:</p>\n<details open><summary>Google翻訳</summary><div>\n<ul>\n<li>次の設定は <code class=\"language-text\">testPathIgnorePatterns</code>です。<code class=\"language-text\">node_modules</code>または<code class=\"language-text\">.cache</code>ディレクトリ内のテストを無視するようにJestに指示しています。</li>\n<li>次のオプションは非常に重要であり、ほかのJestガイドにあるものとは異なります。<code class=\"language-text\">transformIgnorePatterns</code>が必要な理由は、GatsbyにトランスパイルされていないES6コードが含まれているためです。デフォルトでは、Jestは <code class=\"language-text\">node_modules</code>内のコードを変換しようとしません。したがって、次のようなエラーが発生します。\n</dvi></details></li>\n</ul>\n</li>\n</ul>\n<div class=\"filename\">TEXT</div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">/my-app/node_modules/gatsby/cache-dir/gatsby-browser-entry.js:1\n({&quot;Object.&lt;anonymous&gt;&quot;:function(module,exports,require,__dirname,__filename,global,jest){import React from &quot;react&quot;\n                                                                                            ^^^^^^\nSyntaxError: Unexpected token import</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This is because <code class=\"language-text\">gatsby-browser-entry.js</code> isn’t being transpiled before running in Jest.\nYou can fix this by changing the default <code class=\"language-text\">transformIgnorePatterns</code> to exclude the <code class=\"language-text\">gatsby</code> module.</p>\n<details open><summary>Google翻訳</summary><div>\n<p>これは、 <code class=\"language-text\">gatsby-browser-entry.js</code>がJestで実行される前にトランスパイルされていないためです。\nこれを修正するには、デフォルトの <code class=\"language-text\">transformIgnorePatterns</code>を変更して、<code class=\"language-text\">gatsby</code>モジュールを除外します。\n</dvi></details></p>\n<ul>\n<li>\n<p>The <code class=\"language-text\">globals</code> section sets <code class=\"language-text\">__PATH_PREFIX__</code>, which is usually set by Gatsby, and which some components need.</p>\n<details open><summary>Google翻訳</summary><div>\n<p><code class=\"language-text\">globals</code>セクションは<code class=\"language-text\">__PATH_PREFIX__</code>を設定します。これは通常Gatsbyによって設定されますが、一部のコンポーネントに必要です。\n</dvi></details></p>\n</li>\n<li>\n<p>You need to set <code class=\"language-text\">testURL</code> to a valid URL, because some DOM APIs such as <code class=\"language-text\">localStorage</code> are unhappy with the default (<code class=\"language-text\">about:blank</code>).</p>\n<blockquote>\n<p>Note: if you’re using Jest 23.5.0 or later, <code class=\"language-text\">testURL</code> will default to <code class=\"language-text\">http://localhost</code> so you can skip this setting.</p>\n</blockquote>\n<details open><summary>Google翻訳</summary><div>\n<p><code class=\"language-text\">localStorage</code>などの一部のDOM APIはデフォルト（<code class=\"language-text\">about：blank</code>）に不満があるため、 <code class=\"language-text\">testURL</code>を有効なURLに設定する必要があります。</p>\n<blockquote>\n<p>注：Jest 23.5.0以降を使用している場合、 <code class=\"language-text\">testURL</code>はデフォルトで<code class=\"language-text\">http://localhost</code>に設定されるため、この設定をスキップできます。\n</dvi></details></p>\n</blockquote>\n</li>\n<li>\n<p>There’s one more global that you need to set, but as it’s a function you can’t set it here in the JSON. The <code class=\"language-text\">setupFiles</code> array lets you list files that will be included before all tests are run, so it’s perfect for this.</p>\n<details open><summary>Google翻訳</summary><div>\n<ul>\n<li>設定する必要のあるグローバルがもう1つありますが、これは関数であるため、ここではJSONで設定できません。<code class=\"language-text\">setupFiles</code>配列を使用すると、すべてのテストが実行される前に含まれるファイルを一覧表示できます。これに最適です\n</dvi></details></li>\n</ul>\n</li>\n</ul>\n<div class=\"filename\">loadershim.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">global<span class=\"token punctuation\">.</span>___loader <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  enqueue<span class=\"token operator\">:</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"3-useful-mocks-to-complete-your-testing-environment-br-（テスト環境を完成させるための便利なモック）\" style=\"position:relative;\"><a href=\"#3-useful-mocks-to-complete-your-testing-environment-br-%EF%BC%88%E3%83%86%E3%82%B9%E3%83%88%E7%92%B0%E5%A2%83%E3%82%92%E5%AE%8C%E6%88%90%E3%81%95%E3%81%9B%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AE%E4%BE%BF%E5%88%A9%E3%81%AA%E3%83%A2%E3%83%83%E3%82%AF%EF%BC%89\" aria-label=\"3 useful mocks to complete your testing environment br （テスト環境を完成させるための便利なモック） permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Useful mocks to complete your testing environment <br />（テスト環境を完成させるための便利なモック）</h3>\n<p><strong>Mocking <code class=\"language-text\">gatsby</code></strong></p>\n<p>Finally, it’s a good idea to mock the <code class=\"language-text\">gatsby</code> module itself. This may not be needed at first, but will make things a lot easier if you want to test components that use <code class=\"language-text\">Link</code> or GraphQL.</p>\n  <details open><summary>Google翻訳</summary><div>\n<p>  さいごに、 <code class=\"language-text\">gatsby</code>モジュール自体のモックをオススメします。さいしょは必要ないかもしれません、ただし、 <code class=\"language-text\">Link</code>またはGraphQLを使用するコンポーネントをテストする場合は、作業がはるかに簡単になります。\n</dvi></details></p>\n<div class=\"filename\">__mocks__/gatsby.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> React <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"react\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> gatsby <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">requireActual</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gatsby\"</span><span class=\"token punctuation\">)</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>gatsby<span class=\"token punctuation\">,</span>\n  graphql<span class=\"token operator\">:</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  Link<span class=\"token operator\">:</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockImplementation</span><span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// these props are invalid for an `a` tag</span>\n    <span class=\"token comment\">// これらのpropsは `a`タグには無効です</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n      activeClassName<span class=\"token punctuation\">,</span>\n      activeStyle<span class=\"token punctuation\">,</span>\n      getProps<span class=\"token punctuation\">,</span>\n      innerRef<span class=\"token punctuation\">,</span>\n      partiallyActive<span class=\"token punctuation\">,</span>\n      ref<span class=\"token punctuation\">,</span>\n      replace<span class=\"token punctuation\">,</span>\n      to<span class=\"token punctuation\">,</span>\n      <span class=\"token operator\">...</span>rest\n    <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n      React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>rest<span class=\"token punctuation\">,</span>\n        href<span class=\"token operator\">:</span> to<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  StaticQuery<span class=\"token operator\">:</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  useStaticQuery<span class=\"token operator\">:</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This mocks the <code class=\"language-text\">graphql()</code> function, <code class=\"language-text\">Link</code> component, and <code class=\"language-text\">StaticQuery</code> component.</p>\n  <details open><summary>Google翻訳</summary><div>\n<p>  これは、 <code class=\"language-text\">graphql()</code>関数、 <code class=\"language-text\">Link</code>コンポーネント、および<code class=\"language-text\">StaticQuery</code>コンポーネントをモックします。\n</dvi></details></p>\n<h2 id=\"writing-tests（テストを書く）\" style=\"position:relative;\"><a href=\"#writing-tests%EF%BC%88%E3%83%86%E3%82%B9%E3%83%88%E3%82%92%E6%9B%B8%E3%81%8F%EF%BC%89\" aria-label=\"writing tests（テストを書く） permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Writing tests（テストを書く）</h2>\n<p>A full guide to unit testing is beyond the scope of this guide, but you can start with a snapshot test to check that everything is working.</p>\n<p>First, create the test file. You can either put these in a <code class=\"language-text\">__tests__</code> directory, or put them elsewhere (usually next to the component itself), with the extension <code class=\"language-text\">.spec.js</code> or <code class=\"language-text\">.test.js</code>. The decision comes down to your own preference. In this guide, you will use the <code class=\"language-text\">__tests__</code> folder convention. To test the header component, create a header.js file in <code class=\"language-text\">src/components/__tests__/</code>:</p>\n  <details open><summary>Google翻訳</summary><div>\n<p>  まず、テストファイルを作成します。 これらを <code class=\"language-text\">__tests__</code>ディレクトリに置くことができます。\nまたは、拡張子が<code class=\"language-text\">.spec.js</code>または<code class=\"language-text\">.test.js</code>の別の場所（通常はコンポーネント自体の隣）に配置します。\n決定はあなた自身の好みによります。このガイドでは、 <code class=\"language-text\">__tests__</code>フォルダー規則を使用します。\nheaderコンポーネントをテストするには、 <code class=\"language-text\">src/components/__tests__/</code>にheader.jsファイルを作成します。\n</dvi></details></p>\n<div class=\"filename\">src/components/__tests__/header.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> renderer <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-test-renderer\"</span>\n<span class=\"token keyword\">import</span> Header <span class=\"token keyword\">from</span> <span class=\"token string\">\"../header\"</span>\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Header\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"renders correctly\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> tree <span class=\"token operator\">=</span> renderer\n      <span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>Header siteTitle<span class=\"token operator\">=</span><span class=\"token string\">\"Default Starter\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">toJSON</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatchSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This is a very brief snapshot test, which uses <code class=\"language-text\">react-test-renderer</code> to render the component, and then generates a snapshot of it on the first run. It then compares future snapshots against this, which means you can quickly check for regressions. Visit <a href=\"https://jestjs.io/docs/en/getting-started\">the Jest docs</a> to learn more about other tests that you can write.</p>\n  <details open><summary>Google翻訳</summary><div>\n<p>  これは非常に簡単なスナップショットテストです。\nこれは <code class=\"language-text\">react-test-renderer</code>を使用してコンポーネントをレンダリングし、最初の実行時にそのスナップショットを生成します。\n次に、将来のスナップショットをこれと比較します。これは、リグレッションをすばやく確認できることを意味します。\n<a href=\"https://jestjs.io/docs/en/getting-started\">Jest docs</a>にアクセスして、作成できる他のテストの詳細を確認してください。\n</dvi></details></p>\n<h2 id=\"running-tests（テストの実行）\" style=\"position:relative;\"><a href=\"#running-tests%EF%BC%88%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E5%AE%9F%E8%A1%8C%EF%BC%89\" aria-label=\"running tests（テストの実行） permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Running tests（テストの実行）</h2>\n<p>If you look inside <code class=\"language-text\">package.json</code> you will probably find that there is already a script for <code class=\"language-text\">test</code>, which just outputs an error message. Change this to use the <code class=\"language-text\">jest</code> executable that you now have available, like so:</p>\n  <details open><summary>Google翻訳</summary><div>\n<p>  <code class=\"language-text\">package.json</code>の内部を見ると、おそらく<code class=\"language-text\">test</code>のスクリプトがすでにあります。エラーメッセージを出力するだけです。次のように、現在利用可能な <code class=\"language-text\">jest</code>実行可能ファイルを使用するように変更します。\n</dvi></details></p>\n<div class=\"filename\">package.json</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jest\"</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>This means you can now run tests by typing <code class=\"language-text\">npm test</code>. If you want you could also run with a flag that triggers watch mode to watch files and run tests when they are changed: <code class=\"language-text\">npm test -- --watch</code>.</p>\n  <details open><summary>Google翻訳</summary><div>\n<p>  これは、<code class=\"language-text\">npm test</code>と入力してテストを実行できます。\n必要に応じて、監視モードをトリガーしてファイルを監視し、ファイルが変更されたときにテストを実行するフラグを使用して実行することもできます。： <code class=\"language-text\">npm test -- --watch</code>\n</dvi></details></p>\n<p>Run the tests again now and it should all work! You may get a message about the snapshot being written. This is created in a <code class=\"language-text\">__snapshots__</code> directory next to your tests. If you take a look at it, you will see that it is a JSON representation of the <code class=\"language-text\">&lt;Header /&gt;</code> component. You should check your snapshot files into a source control system (for example, a GitHub repo) so that any changes are tracked in history. This is particularly important to remember if you are using a continuous integration system such as Travis or CircleCI to run tests, as these will fail if the snapshot is not checked into source control.</p>\n  <details open><summary>Google翻訳</summary><div>\n<p>  今すぐテストを再実行すると、すべて機能するはずです。 書き込まれているスナップショットに関するメッセージが表示されます。\nこれは、テストの横の <code class=\"language-text\">__snapshots__</code>ディレクトリに作成されます。\nこれを見ると、 <code class=\"language-text\">&lt;Header /&gt;</code>コンポーネントのJSON表現であることがわかります。スナップショットファイルをソース管理システム（GitHubリポジトリなど）にチェックインして、変更が履歴で追跡されるようにする必要があります。\n　これは、TravisやCircleCIなどの継続的インテグレーションシステムを使用してテストを実行している場合に覚えておくことがとくに重要です。\n　スナップショットがソース管理にチェックインされていない場合、これらは失敗します。\n</dvi></details></p>\n<p>If you make changes that mean you need to update the snapshot, you can do this by running <code class=\"language-text\">npm test -- -u</code>.</p>\n  <details open><summary>Google翻訳</summary><div>\n  </dvi></details>\n<h2 id=\"using-typescript（typescriptの使用）\" style=\"position:relative;\"><a href=\"#using-typescript%EF%BC%88typescript%E3%81%AE%E4%BD%BF%E7%94%A8%EF%BC%89\" aria-label=\"using typescript（typescriptの使用） permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using TypeScript（TypeScriptの使用）</h2>\n<p>If you are using TypeScript, you need to install typings packages and make two changes to your config.</p>\n  <details open><summary>Google翻訳</summary><div>\n<p>  スナップショットを更新する必要がある変更を加えた場合、<code class=\"language-text\">npm test --- u</code>を実行します。\n</dvi></details></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"command-line-prompt\"><span data-user=root data-host=localhost></span></span><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev @types/jest @types/react-test-renderer</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Update the transform in <code class=\"language-text\">jest.config.js</code> to run <code class=\"language-text\">jest-preprocess</code> on files in your project’s root directory.</p>\n<blockquote>\n<p>Note: <code class=\"language-text\">&lt;rootDir&gt;</code> is replaced by Jest with the root directory of the project. Don’t change it.</p>\n</blockquote>\n  <details open><summary>Google翻訳</summary><div>\n<p>  <code class=\"language-text\">jest.config.js</code>の変換を更新して、プロジェクトのルートディレクトリ内のファイルに対して<code class=\"language-text\">jest-preprocess</code>を実行します。</p>\n<blockquote>\n<p>注： <code class=\"language-text\">&lt;rootDir&gt;</code>は、プロジェクトのルートディレクトリを持つJestに置き換えられます。 変更しないでください。\n</dvi></details></p>\n</blockquote>\n<div class=\"filename\">jest.config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string\">\"^.+\\\\.[jt]sx?$\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;rootDir>/jest-preprocess.js\"</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Also update <code class=\"language-text\">jest-preprocess.js</code> with the following Babel preset to look like this:</p>\n  <details open><summary>Google翻訳</summary><div>\n<p>  また、 <code class=\"language-text\">jest-preprocess.js</code>をBabelプリセットで次のように更新します。\n</dvi></details></p>\n<div class=\"filename\">jest-preprocess.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> babelOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  presets<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"babel-preset-gatsby\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"@babel/preset-typescript\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Once this is changed, you can write your tests in TypeScript using the <code class=\"language-text\">.ts</code> or <code class=\"language-text\">.tsx</code> extensions.</p>\n  <details open><summary>Google翻訳</summary><div>\n  </dvi></details>\n<h3 id=\"using-tsconfig-paths（tsconfigパスの使用）\" style=\"position:relative;\"><a href=\"#using-tsconfig-paths%EF%BC%88tsconfig%E3%83%91%E3%82%B9%E3%81%AE%E4%BD%BF%E7%94%A8%EF%BC%89\" aria-label=\"using tsconfig paths（tsconfigパスの使用） permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using tsconfig paths（tsconfigパスの使用）</h3>\n<p>If you are using <a href=\"https://www.typescriptlang.org/tsconfig#paths\">tsconfig paths</a> there is a single change to your config.</p>\n  <details open><summary>Google翻訳</summary><div>\n<p>  これが変更されると、 <code class=\"language-text\">.ts</code>または<code class=\"language-text\">.tsx</code>拡張子を使用してTypeScriptでテストを記述できます。\n</dvi></details></p>\n<p>&#x3C;1> Add <a href=\"https://github.com/kulshekhar/ts-jest\">ts-jest</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"command-line-prompt\"><span data-user=root data-host=localhost></span></span><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev ts-jest</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>&#x3C;2> Update <code class=\"language-text\">jest.config.js</code> to import and map <code class=\"language-text\">tsconfig.json</code> paths <br />\n（<code class=\"language-text\">jest.config.js</code>を更新して、<code class=\"language-text\">tsconfig.json</code>パスをインポートしてマッピングします）</p>\n<div class=\"filename\">jest.config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> compilerOptions <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./tsconfig.json\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> pathsToModuleNameMapper <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ts-jest/utils\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> paths <span class=\"token operator\">=</span> <span class=\"token function\">pathsToModuleNameMapper</span><span class=\"token punctuation\">(</span>compilerOptions<span class=\"token punctuation\">.</span>paths<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  prefix<span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;rootDir>/\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>&#x3C;3> Add paths to <code class=\"language-text\">jest.config.js</code> moduleNameMapper <br />\n（<code class=\"language-text\">jest.config.js</code>にパスを追加します  moduleNameMapper）</p>\n<div class=\"filename\">jest.config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">moduleNameMapper<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'.+\\\\.(css|styl|less|sass|scss)$'</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">identity-obj-proxy</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'.+\\\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$'</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;rootDir>/tests/file-mock.js</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>paths<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"other-resources（その他のリソース）\" style=\"position:relative;\"><a href=\"#other-resources%EF%BC%88%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%EF%BC%89\" aria-label=\"other resources（その他のリソース） permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Other resources（その他のリソース）</h3>\n<p>If you need to make changes to your Babel config, you can edit the config in <code class=\"language-text\">jest-preprocess.js</code>. You may need to enable some of the plugins used by Gatsby, though remember you may need to install the Babel 7 versions. See the <a href=\"https://www.gatsbyjs.com/docs/how-to/custom-configuration/babel\">Gatsby Babel config guide</a> for some examples.</p>\n  <details open>\n  <summary>Google翻訳</summary>\n  <div>\n<p>  Babelの設定を変更する必要がある場合は、 <code class=\"language-text\">jest-preprocess.js</code>で設定を編集できます。Gatsbyが使用するプラグインの一部を有効にする必要があります。\nBabel7バージョンをインストールする必要があるかもしれないことを覚えておいてください。いくつかの例については、<a href=\"https://www.gatsbyjs.com/docs/how-to/custom-configuration/babel\">Gatsby Babel構成ガイド</a>を参照してください。\n</dvi></p>\n  </details>\n<p>For more information on Jest testing, visit <a href=\"https://jestjs.io/docs/en/getting-started\">the Jest site</a>.</p>\n  <details open><summary>Google翻訳</summary><div>\n<p>  Jestテストの詳細については、<a href=\"https://jestjs.io/docs/en/getting-started\">Jestサイト</a>にアクセスしてください。\n</dvi></details></p>\n<p>For an example encapsulating all of these techniques—and a full unit test suite with <a href=\"https://github.com/testing-library/react-testing-library\">@testing-library/react</a>, check out the <a href=\"https://github.com/gatsbyjs/gatsby/tree/master/examples/using-jest\">using-jest</a> example.</p>\n  <details open><summary>Google翻訳</summary><div>\n<p>  例として\nこれらすべてのテクニックをカプセル化、およびフルユニットテストスイートの例を確認してください。</p>\n<p>  <a href=\"https://github.com/testing-library/react-testing-library\">@tests-library/react</a>,\n<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/examples/using-jest\">using-jest</a>\n</dvi></details></p>\n<p><a href=\"https://github.com/gatsbyjs/gatsby/blob/master/docs/docs/how-to/testing/unit-testing.md\">Edit this page on GitHub</a></p>","fields":{"slug":"/gatsby-docs/unit-testing/"},"frontmatter":{"published":"2021-05-06T00:00:00.000Z","pubDate":"May 06, 2021","modified":"2021-05-06T00:00:00.000Z","modDate":"May 06, 2021","title":"Unit Testing（ユニットテスト）","description":"単体テストは、コードをデプロイする前にコードのエラーから保護するための優れた方法です。Gatsbyには、すぐに使用できる単体テストのサポートは含まれていませんが、起動して実行するのに数ステップしかかかりません。しかし、Gatsbyビルドプロセスにはいくつかの機能があり、標準のJestセットアップが完全に機能しないことを意味します。このガイドでは、設定方法を説明します。","tags":["Gatsby","GatsbyDocs","GatsbyDocs-HowToGuides","GatsbyDocs-HowToGuides-Testing"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#683898","images":{"fallback":{"src":"/static/3f4376afad6ab1b8605d4dbb32f110c4/5aead/gatsby-icon.png","srcSet":"/static/3f4376afad6ab1b8605d4dbb32f110c4/e9fba/gatsby-icon.png 50w,\n/static/3f4376afad6ab1b8605d4dbb32f110c4/15e42/gatsby-icon.png 100w,\n/static/3f4376afad6ab1b8605d4dbb32f110c4/5aead/gatsby-icon.png 200w,\n/static/3f4376afad6ab1b8605d4dbb32f110c4/d6138/gatsby-icon.png 400w","sizes":"(min-width: 200px) 200px, 100vw"},"sources":[{"srcSet":"/static/3f4376afad6ab1b8605d4dbb32f110c4/dbc4a/gatsby-icon.webp 50w,\n/static/3f4376afad6ab1b8605d4dbb32f110c4/d8057/gatsby-icon.webp 100w,\n/static/3f4376afad6ab1b8605d4dbb32f110c4/2e34e/gatsby-icon.webp 200w,\n/static/3f4376afad6ab1b8605d4dbb32f110c4/416c3/gatsby-icon.webp 400w","type":"image/webp","sizes":"(min-width: 200px) 200px, 100vw"}]},"width":200,"height":200},"original":{"src":"/static/gatsby-icon-3f4376afad6ab1b8605d4dbb32f110c4.png","width":512,"height":512}}}}},"previous":{"fields":{"slug":"/gatsby-docs/debuggin-html-builds/"},"frontmatter":{"title":"Debugging HTML Build (HTMLビルドのデバッグ)","published":"2021-05-06T00:00:00.000Z","pubDate":"May 06, 2021","modified":"2021-05-06T00:00:00.000Z","modDate":"May 06, 2021"}},"next":null},"pageContext":{"id":"5c0c5fdc-d491-54c1-88af-1ad18fa3a6e2","previousPostId":"3190e89b-dd3b-568c-94ce-d49801234fff","nextPostId":null}},"staticQueryHashes":[]}